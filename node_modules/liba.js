// npm libs
var queue = require('minimal-queue');

function publishMessage(msg){
    // publish message to global main queue
	mainQueue.enqueue(msg);
}

// setup local queue
var messageQueue = queue.up(function(msg){

    var job = this;
    
    if(msg.ID!="liba"){ // filter out my own lib's messages
        console.log("liba processing " + JSON.stringify(msg));
    }

    job.done();

});
messageQueue.concurrency = 1;

exports.init = function(){
    publishMessage({type:"event",ID:"liba",data:"liba data"});
}

exports.processMessage = function(msg){
	messageQueue.enqueue(msg);
}
