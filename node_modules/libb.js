// npm libs
var queue = require('minimal-queue');

function publishMessage(msg){
    // publish message to global main queue
	mainQueue.enqueue(msg);
}

// setup local queue
var messageQueue = queue.up(function(msg){

    var job = this;
    
    if(msg.ID!="libb"){ // filter out my own lib's messages
        console.log("libb processing " + JSON.stringify(msg));
    }

    job.done();

});
messageQueue.concurrency = 1;

exports.init = function(){
    publishMessage({type:"event",ID:"libb",data:"libb data"});
}

exports.processMessage = function(msg){
	messageQueue.enqueue(msg);
}
